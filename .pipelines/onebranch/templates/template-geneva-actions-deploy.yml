jobs:
  - job: GenevaActionsDeploy
    timeoutInMinutes: 30
    pool:
      type: linux

    variables: # More settings at https://aka.ms/obpipelines/yaml/jobs
      ob_outputDirectory: $(Build.SourcesDirectory)/out # this directory is uploaded to pipeline artifacts, reddog and cloudvault. More info at https://aka.ms/obpipelines/artifacts

    steps:
      - checkout: rhado
      - template: ./template-generate-ev2-manifests.yml
        parameters:
          generationType: geneva-actions-deploy

      - download: actions
        artifact: drop
      - task: CopyFiles@2
        inputs:
          sourceFolder: $(PIPELINE.WORKSPACE)/actions/drop/outputs/package/GenevaArtifacts
          contents: "**"
          targetFolder: ${{ variables.ob_outputDirectory }}/actions
